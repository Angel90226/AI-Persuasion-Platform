"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateruby_openai"]("main",{

/***/ "./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./frontend_app/pages/PreTask.vue?vue&type=script&lang=js":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./frontend_app/pages/PreTask.vue?vue&type=script&lang=js ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.runtime.esm-bundler.js\");\n/* harmony import */ var vue_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vue-router */ \"./node_modules/vue-router/dist/vue-router.mjs\");\n/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! vuex */ \"./node_modules/vuex/dist/vuex.esm-bundler.js\");\n/* harmony import */ var _constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constant/Constants.vue */ \"./frontend_app/constant/Constants.vue\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var marked__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! marked */ \"./node_modules/marked/lib/marked.esm.js\");\n/* harmony import */ var _mdi_font_css_materialdesignicons_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mdi/font/css/materialdesignicons.css */ \"./node_modules/@mdi/font/css/materialdesignicons.css\");\n/* harmony import */ var _mdi_font_css_materialdesignicons_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_mdi_font_css_materialdesignicons_css__WEBPACK_IMPORTED_MODULE_3__);\n/* unplugin-vue-components disabled */\n\n\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  setup() {\n    const route = (0,vue_router__WEBPACK_IMPORTED_MODULE_4__.useRoute)()\n    const router = (0,vue_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)()\n    const store = (0,vuex__WEBPACK_IMPORTED_MODULE_5__.useStore)()\n    const showRoleDialog = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(true)\n    const userInput = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)('')\n    const messages = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)([])\n    const showTyping = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false)\n    const showEmail = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false)\n    const roleDescription = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)('')\n    const isLoadingRole = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(true);\n    const emailLongRequirement = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(_constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].OFFICEBOT_EMAIL_REQUIREMENT)\n    const officebotIntro = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)('')\n    const currentTemp = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(_constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].DEFAULTS_TEMP)\n    const messageSending = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);\n    const user_id = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)('anonymous');\n    const isReadyToSend = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);\n    let userStartTime=null\n    let userSendTime=null\n    let AIStartTime=null\n    let localData = {}\n    const botName = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)('OfficeBot');\n\n    // shared store variables\n    const updateSharedVariable = (obj) => {\n      store.commit('updateSharedVariable', obj)\n    }\n\n    ;(0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(async () => {\n      console.log('PreTask mounted');\n      getUser();\n      await getCondition();\n      await updateUser();\n    })\n\n    const getUser=async()=> {\n      user_id.value = route.query[_constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].URL_USER_PARAMS] || 'anonymous';\n      \n      if(user_id.value === 'anonymous'){\n        router.push({ path: '/missing' })\n      }\n      updateSharedVariable({'user_id': user_id.value});\n      localData['user_id'] = user_id.value\n      // update local storage\n      if (!localStorage.getItem(user_id.value)) {\n        localStorage.setItem(user_id.value, JSON.stringify(localData));\n      } else {\n        const data = localStorage.getItem(user_id.value);\n        localData = JSON.parse(data);\n      }\n    };\n\n    const getCondition = async () => {\n      // check if the condition is set in the url\n      const encodedConditions = route.query[_constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].URL_CONDITION_PARAMS] || 'none';\n      if(encodedConditions !== 'none'){\n        const condition = JSON.parse(atob(encodedConditions))\n        console.log('Test Condition:', condition);\n        localData['condition'] = condition;\n        localStorage.setItem(user_id.value, JSON.stringify(localData))\n      }\n      if(!localData['condition']||localData['condition'].expire_time < new Date().getTime()){\n        try{\n          console.log('Random Condition'); \n          let api_url = \"/random-condition\";\n          if(user_id.value !== 'anonymous'){\n            api_url = `/random-condition?user_id=${user_id.value}`;\n          } \n          const { data } = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get(api_url);\n          updateSharedVariable({ 'condition': data })\n          data.expire_time = new Date().getTime() + _constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].MISSION_EXPIRE_TIME*1000;\n          localData['condition'] = data;\n          localStorage.setItem(user_id.value, JSON.stringify(localData))\n        } catch (error) {\n          console.error('Failed to fetch task:', error);\n          location.reload();\n          sendError({error_message:\"Failed to fetch task:\"+ error});\n        }\n      }\n      if(localData['condition'].power_condition === 'high'){\n        roleDescription.value = _constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].HIGH_POWER_ROLE_DESCRIPTION;\n        officebotIntro.value = _constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].HIGH_POWER_OFFICEBOT_INTRO;\n        botName.value = 'AssistantBot';\n      }else{\n        roleDescription.value = _constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].LOW_POWER_ROLE_DESCRIPTION;\n        officebotIntro.value = _constant_Constants_vue__WEBPACK_IMPORTED_MODULE_1__[\"default\"].LOW_POWER_OFFICEBOT_INTRO;\n        botName.value = 'SupervisorBot';\n      }\n      isLoadingRole.value = false;\n    }\n    const updateUser = async () => {\n      try {\n        console.log('Updating user');\n        let api_url = \"/update_user\";\n        if(user_id.value !== 'anonymous'){\n          api_url = `/update_user?user_id=${user_id.value}&power_condition=${localData['condition'].power_condition}&presence_condition=${localData['condition'].presence_condition}`\n          ;\n        } \n        await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post(api_url, {});\n      } catch (error) {\n        console.error('Failed to update user:', error);\n        sendError({error_message:\"Failed to update user:\"+ error});\n      }\n    }\n\n    ;(0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)(messages, () => {\n      // Wait for the next DOM update to scroll\n      ;(0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(() => {\n        scrollToBottom();\n      });\n      \n      // 檢查最新的assistant訊息是否表示準備好送出\n      const lastMsg = messages.value[messages.value.length - 1];\n      if (\n        lastMsg &&\n        lastMsg.type === 'assistant' &&\n        checkReadyToSend(lastMsg.text)\n      ) {\n        handleReadyToSend();\n      }\n    }, { deep: true });\n\n    const onUnderstandClick = async () => {\n      showRoleDialog.value = false;\n      // load messages\n      await initialMessages();\n    }\n    \n    // API related\n    const initialMessages = async ()=>{\n      if (user_id.value === 'anonymous') return;\n      \n      try {\n        showEmail.value = true;\n        let api_url = \"/messages\";\n        if(user_id.value !== 'anonymous'){\n          api_url = `/messages?user_id=${user_id.value}`;\n        } \n        const { data } = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get(api_url, {\n          headers: {\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache',\n            'Expires': '0',\n          }\n        });\n\n        if(data.length > 0){\n          messages.value = data.map( (chat)=>{\n            return {\n              id: chat.created_at,\n              text: marked__WEBPACK_IMPORTED_MODULE_2__.marked.parse(chat.response),\n              type: chat.role,\n              timestamp: chat.created_at ? new Date(chat.created_at) : new Date(),\n            }\n          });\n          \n          // check if there is any assistant message that indicates ready to send\n          const readyMessage = messages.value.find(m => \n            m.type === 'assistant' && checkReadyToSend(m.text)\n          );\n          if (readyMessage) {\n            handleReadyToSend();\n          }\n        } else {\n          await streamingResponse();\n        }\n        \n        (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(() => {\n          scrollToBottom();\n        });\n      } catch (error) {\n        console.error(\"Failed to fetch initial messages:\", error);\n        sendError({error_message:\"Failed to fetch initial messages:\"+ error});\n      }\n    }\n\n    const scrollToBottom = () => {\n      ;(0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(() => {\n        const container = document.querySelector('.chat-messages')\n        if (container) {\n          container.scrollTop = container.scrollHeight\n        }\n      })\n    }\n\n    const onInputKeyDown = () => {\n      if (!userStartTime) {\n        userStartTime = new Date().toISOString()\n        console.log('User Start Time:', userStartTime);\n      }\n    };\n    //Create a message\n    function createMessage(message,identity) {\n      messages.value.push({\n        id: Date.now(),\n        text: message,\n        type: identity || \"user\",\n        temp: currentTemp.value,\n        timestamp: new Date(),\n      });\n      scrollToBottom();\n    }\n    \n    const handleSend = async () => {\n      userSendTime = new Date().toISOString();\n      if (!userInput.value.trim()) return\n      \n      // Add user message\n      const userMessageText = userInput.value;\n      createMessage(marked__WEBPACK_IMPORTED_MODULE_2__.marked.parse(userMessageText),'user');\n      userInput.value = ''; // Clear input immediately\n      \n      try {\n        // Store message in backend\n        await storeMessage(userMessageText,'user', userStartTime, userSendTime)\n\n        // Get streaming response\n        await streamingResponse()\n\n      } catch (error) {\n        console.error('Error in handleSend:', error)\n        createMessage('Sorry, I encountered an error. Please try again.','assistant');\n      } finally {\n        showTyping.value = false\n        userInput.value = ''\n      }\n    }\n    const storeMessage = async (text, type, start_time, send_time) => {\n      try {\n        const postData = {\n          response: text,\n          role: type,\n          start_time: start_time,\n          send_time: send_time\n      };\n      console.log('Post Data:', postData);\n        let api_url = \"/message\";\n        if(user_id.value !== 'anonymous'){\n          api_url = `/message?user_id=${user_id.value}`;\n        } \n      const { data } = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post(api_url, postData);\n      console.log('Store Message:', data);\n\n      } catch (error) {\n        console.error('Failed to store message:', error)\n        sendError({error_message:\"Failed to store message:\"+ error});\n      }\n    }\n\n    let controller = null;\n\n    // Helper function to animate text display character by character\n    const animateStreamedText = async (token, streaming_message_ref) => {\n      streaming_message_ref.value += token;\n      messages.value[messages.value.length - 1][\"text\"] = marked__WEBPACK_IMPORTED_MODULE_2__.marked.parse(streaming_message_ref.value);\n      scrollToBottom();\n\n      // check if there is any assistant message that indicates ready to send\n      if (checkReadyToSend(streaming_message_ref.value)) {\n        handleReadyToSend();\n      }\n\n      // Determine delay based on token content (punctuation can be slower)\n      const delay = getDelay(token);\n      await new Promise(resolve => setTimeout(resolve, delay));\n    };\n\n    const getDelay = (token) => {\n      if (token.match(/[.!?]/)) return 350;\n      if (token.match(/[,;]/)) return 150;\n      return 20 + Math.random() * 40;\n    };\n    \n    // Real-time chat effect\n    const botSendMessage = async (options = {}) => {\n      showTyping.value = true\n      const delay = options.delay || 1000\n      await new Promise(resolve => setTimeout(resolve, delay))\n      showTyping.value = false\n      createMessage('', 'assistant');\n    }\n\n    const streamingResponse = async () => {\n      messageSending.value = true;\n      let insufficient=false;\n      let save_message = '';\n      const streaming_message = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(''); // Use a ref to pass to the helper function\n      let api_url = \"/openAI-streaming\";\n      if(user_id.value !== 'anonymous'){\n        api_url = `/openAI-streaming?user_id=${user_id.value}`\n        ;\n      } \n      controller = new AbortController();\n      const signal = controller.signal;\n      AIStartTime = new Date().toISOString();\n      try {\n        botSendMessage();\n        \n        const response = await fetch(api_url,\n        {\n          method: \"POST\",\n          headers: {\n          \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            message_content: userInput.value,\n            system_temp: currentTemp.value,\n            role: \"user\",\n            start_time: userStartTime,\n            send_time: userSendTime,\n          }),\n          signal,\n        });\n        userInput.value = '';\n        // disabled the sender button\n        \n        const reader = response.body.getReader();\n        const decoder = new TextDecoder(\"utf-8\",{ stream: true });\n\n        while(true){\n          const {done, value} = await reader.read();\n          if(done){\n            break;\n          }\n          const chunk = decoder.decode(value);\n\n          const lines = chunk.split(\"\\n\");\n          if(insufficient){\n            lines[0] = save_message + lines[0];\n            insufficient=false;\n          }\n          console.log('Streaming Lines:', lines);\n\n          const parsedLines = lines\n                .filter((line) => line.trim() !== \"\" && !line.includes(\"\\[DONE\\]\"))\n                .map((line) => line.replace(/^data: /, \"\").trim())\n                .map((line) => {\n                  try {\n                    return JSON.parse(line);\n                  } catch (error) {\n                    console.error(\"Failed to parse JSON line:\", line);\n                    // sendError({error_message:\"Failed to parse JSON line:\"+ line});\n                    insufficient=true;\n                    save_message = line;\n\n                    console.error(error);\n                    return null; // or handle the error in a different way\n                  }\n                })\n                .filter((parsedLine) => parsedLine !== null); // Filter out null values caused by parsing errors\n\n          for ( const parsedLine of parsedLines){\n            const {choices} = parsedLine;\n            const { delta } = choices[0];\n            const { content } = delta;\n            if(content){\n              await animateStreamedText(content, streaming_message);\n            }\n          }\n        }\n      } catch (error) {\n        if(signal.aborted){\n          console.error('Request Aborted:', error);\n        }else{\n          console.error('Failed to Streaming:', error);\n          sendError({error_message:\"Failed to Streaming:\"+ error});\n        }\n      }finally{\n        controller = null;\n        messageSending.value = false;\n        // send API to backend\n        await storeMessage(streaming_message.value,'assistant', AIStartTime, new Date().toISOString());\n      }\n    }\n\n    const sendError = async (error) => {\n      if (error) {\n        let api_url = \"/error-log\";\n        if (user_id.value !== 'anonymous') {\n          api_url = `/error-log?user_id=${user_id.value}`;\n        }\n        try {\n          const { data } = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post(api_url, error);\n          // console.log('Response Behavior', data);\n        } catch (err) {\n          console.error('Failed to send error:', err);\n          // Handle specific error scenarios here if needed\n        }\n      }\n    }\n\n    const formatTimestamp = (ts) => {\n      if (!ts) return ''\n      const date = typeof ts === 'string' ? new Date(ts) : ts\n      return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })\n    }\n\n    function getTodayString() {\n      const today = new Date();\n      const year = today.getFullYear();\n      const month = String(today.getMonth() + 1).padStart(2, '0');\n      const day = String(today.getDate()).padStart(2, '0');\n      const weekDay = today.toLocaleDateString('en-US', { weekday: 'short' }); // e.g. Mon, Tue\n      return `${year}/${month}/${day} ${weekDay} 9:30 AM`;\n    }\n\n    const todayEmailDate = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(getTodayString());\n\n    // check if the assistant message indicates ready to send\n    const checkReadyToSend = (messageText) => {\n      if (!messageText || typeof messageText !== 'string') return false;\n      \n      const text = messageText.toLowerCase();\n      // more accurate keyword matching, based on the actual response from the backend prompt\n      const sendKeywords = [\n        'okay, i\\'m sending the email',\n        'okay, i\\'m sending',\n        'i\\'m sending the email',\n        'sending the email',\n        'sending out the email',\n        'sending the email out'\n      ];\n      \n      const isReady = sendKeywords.some(keyword => text.includes(keyword));\n      \n      // for debugging: record the detection result\n      if (isReady) {\n        console.log('Ready to send detected:', text);\n      }\n      \n      return isReady;\n    };\n\n    // handle the logic of ready to send\n    const handleReadyToSend = () => {\n      if (!isReadyToSend.value) {\n        console.log('Handling ready to send - transitioning to main task');\n        isReadyToSend.value = true;\n        localData.PreTaskCompleted = true;\n        localStorage.setItem(user_id.value, JSON.stringify(localData));\n        setTimeout(() => {\n          router.push({ path: '/main-task', query: route.query });\n        }, 1500);\n      }\n    };\n    // Return variables and methods to be used in the template\n    return {\n      showRoleDialog,\n      userInput,\n      messages,\n      showTyping,\n      messageSending,\n      showEmail,\n      roleDescription,\n      emailLongRequirement,\n      officebotIntro,\n      scrollToBottom,\n      handleSend,\n      formatTimestamp,\n      todayEmailDate,\n      onUnderstandClick,\n      isLoadingRole,\n      isReadyToSend,\n      onInputKeyDown,\n      botSendMessage,\n      botName\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ruby-openai/./frontend_app/pages/PreTask.vue?./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/index.js??ruleSet%5B1%5D.rules%5B6%5D.use%5B0%5D");

/***/ }),

/***/ "./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./frontend_app/pages/PreTask.vue?vue&type=template&id=320db610&scoped=true":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./frontend_app/pages/PreTask.vue?vue&type=template&id=320db610&scoped=true ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   render: () => (/* binding */ render)\n/* harmony export */ });\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/container/index.mjs\");\n/* harmony import */ var element_plus_es_components_base_style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! element-plus/es/components/base/style/css */ \"./node_modules/element-plus/es/components/base/style/css.mjs\");\n/* harmony import */ var element_plus_es_components_container_style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! element-plus/es/components/container/style/css */ \"./node_modules/element-plus/es/components/container/style/css.mjs\");\n/* harmony import */ var element_plus_es_components_main_style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! element-plus/es/components/main/style/css */ \"./node_modules/element-plus/es/components/main/style/css.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/row/index.mjs\");\n/* harmony import */ var element_plus_es_components_row_style_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! element-plus/es/components/row/style/css */ \"./node_modules/element-plus/es/components/row/style/css.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/col/index.mjs\");\n/* harmony import */ var element_plus_es_components_col_style_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! element-plus/es/components/col/style/css */ \"./node_modules/element-plus/es/components/col/style/css.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/input/index.mjs\");\n/* harmony import */ var element_plus_es_components_input_style_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! element-plus/es/components/input/style/css */ \"./node_modules/element-plus/es/components/input/style/css.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/dialog/index.mjs\");\n/* harmony import */ var element_plus_es_components_dialog_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! element-plus/es/components/dialog/style/css */ \"./node_modules/element-plus/es/components/dialog/style/css.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/button/index.mjs\");\n/* harmony import */ var element_plus_es_components_button_style_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! element-plus/es/components/button/style/css */ \"./node_modules/element-plus/es/components/button/style/css.mjs\");\n/* harmony import */ var element_plus_es__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! element-plus/es */ \"./node_modules/element-plus/es/components/skeleton/index.mjs\");\n/* harmony import */ var element_plus_es_components_skeleton_style_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! element-plus/es/components/skeleton/style/css */ \"./node_modules/element-plus/es/components/skeleton/style/css.mjs\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.runtime.esm-bundler.js\");\n/* unplugin-vue-components disabled */\n\n\n\n\n\n\n\n\n\nconst _hoisted_1 = { id: \"pre-task\" }\nconst _hoisted_2 = { class: \"role-content\" }\nconst _hoisted_3 = [\"innerHTML\"]\nconst _hoisted_4 = { class: \"chat-app-window\" }\nconst _hoisted_5 = { class: \"chat-header\" }\nconst _hoisted_6 = { class: \"chat-title\" }\nconst _hoisted_7 = {\n  class: \"chat-messages\",\n  ref: \"messageContainer\"\n}\nconst _hoisted_8 = {\n  key: 0,\n  class: \"avatar bot-avatar\"\n}\nconst _hoisted_9 = [\"innerHTML\"]\nconst _hoisted_10 = [\"innerHTML\"]\nconst _hoisted_11 = { class: \"bubble-timestamp-outside\" }\nconst _hoisted_12 = {\n  key: 0,\n  class: \"chat-bubble bot\"\n}\nconst _hoisted_13 = { class: \"chat-input-bar\" }\nconst _hoisted_14 = { class: \"email-window\" }\nconst _hoisted_15 = { class: \"email-header\" }\nconst _hoisted_16 = { class: \"email-sender\" }\nconst _hoisted_17 = { class: \"email-date\" }\nconst _hoisted_18 = { class: \"email-content\" }\nconst _hoisted_19 = [\"innerHTML\"]\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_skeleton = element_plus_es__WEBPACK_IMPORTED_MODULE_10__.ElSkeleton\n  const _component_el_button = element_plus_es__WEBPACK_IMPORTED_MODULE_11__.ElButton\n  const _component_el_dialog = element_plus_es__WEBPACK_IMPORTED_MODULE_12__.ElDialog\n  const _component_el_input = element_plus_es__WEBPACK_IMPORTED_MODULE_13__.ElInput\n  const _component_el_col = element_plus_es__WEBPACK_IMPORTED_MODULE_14__.ElCol\n  const _component_el_row = element_plus_es__WEBPACK_IMPORTED_MODULE_15__.ElRow\n  const _component_el_main = element_plus_es__WEBPACK_IMPORTED_MODULE_16__.ElMain\n  const _component_el_container = element_plus_es__WEBPACK_IMPORTED_MODULE_16__.ElContainer\n\n  return ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"div\", _hoisted_1, [\n    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_container, { style: {\"height\":\"100vh\"} }, {\n      default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n        (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_container, {\n          class: \"pre-task\",\n          style: {\"height\":\"100%\"}\n        }, {\n          default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\" Step 1: Role Description Dialog \"),\n            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_dialog, {\n              modelValue: $setup.showRoleDialog,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => (($setup.showRoleDialog) = $event)),\n              \"show-close\": false,\n              \"close-on-click-modal\": false,\n              \"close-on-press-escape\": false,\n              width: \"50%\",\n              class: \"role-intro-dialog\"\n            }, {\n              header: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => _cache[2] || (_cache[2] = [\n                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"h2\", { class: \"role-intro-title\" }, \"Welcome to your role\", -1 /* HOISTED */)\n              ])),\n              footer: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_button, {\n                  type: \"success\",\n                  onClick: $setup.onUnderstandClick,\n                  disabled: $setup.isLoadingRole\n                }, {\n                  default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => _cache[3] || (_cache[3] = [\n                    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createTextVNode)(\"I Understand\")\n                  ])),\n                  _: 1 /* STABLE */,\n                  __: [3]\n                }, 8 /* PROPS */, [\"onClick\", \"disabled\"])\n              ]),\n              default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_2, [\n                  ($setup.isLoadingRole)\n                    ? ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createBlock)(_component_el_skeleton, {\n                        key: 0,\n                        rows: 5,\n                        animated: \"\"\n                      }))\n                    : ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"p\", {\n                        key: 1,\n                        innerHTML: $setup.roleDescription\n                      }, null, 8 /* PROPS */, _hoisted_3))\n                ])\n              ]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"]),\n            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_main, null, {\n              default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_row, { gutter: 20 }, {\n                  default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n                    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\" left: chatbot \"),\n                    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_col, {\n                      span: 12,\n                      class: \"chatbot-area\"\n                    }, {\n                      default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n                        (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_4, [\n                          (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_5, [\n                            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", _hoisted_6, [\n                              _cache[4] || (_cache[4] = (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"i\", { class: \"el-icon-message\" }, null, -1 /* HOISTED */)),\n                              (0,vue__WEBPACK_IMPORTED_MODULE_9__.createTextVNode)(\" \" + (0,vue__WEBPACK_IMPORTED_MODULE_9__.toDisplayString)($setup.botName), 1 /* TEXT */)\n                            ])\n                          ]),\n                          (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_7, [\n                            ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_9__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_9__.renderList)($setup.messages, (msg, idx) => {\n                              return ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"div\", {\n                                key: idx,\n                                class: (0,vue__WEBPACK_IMPORTED_MODULE_9__.normalizeClass)(['chat-bubble', msg.type])\n                              }, [\n                                (msg.type === 'assistant')\n                                  ? ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"div\", _hoisted_8, [...(_cache[5] || (_cache[5] = [\n                                      (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"i\", { class: \"mdi mdi-robot\" }, null, -1 /* HOISTED */)\n                                    ]))]))\n                                  : (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\"v-if\", true),\n                                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", {\n                                  class: (0,vue__WEBPACK_IMPORTED_MODULE_9__.normalizeClass)([\"bubble-content-with-timestamp\", msg.type])\n                                }, [\n                                  (!msg.isDraft)\n                                    ? ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"div\", {\n                                        key: 0,\n                                        class: (0,vue__WEBPACK_IMPORTED_MODULE_9__.normalizeClass)(['bubble-text', msg.type === 'assistant' ? 'bot-text' : 'user-text']),\n                                        innerHTML: msg.text\n                                      }, null, 10 /* CLASS, PROPS */, _hoisted_9))\n                                    : ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"div\", {\n                                        key: 1,\n                                        class: (0,vue__WEBPACK_IMPORTED_MODULE_9__.normalizeClass)(['bubble-text', msg.type === 'assistant' ? 'bot-text' : 'user-text', 'draft-reply']),\n                                        innerHTML: msg.text\n                                      }, null, 10 /* CLASS, PROPS */, _hoisted_10)),\n                                  (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", _hoisted_11, (0,vue__WEBPACK_IMPORTED_MODULE_9__.toDisplayString)($setup.formatTimestamp(msg.timestamp)), 1 /* TEXT */)\n                                ], 2 /* CLASS */)\n                              ], 2 /* CLASS */))\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\" Typing animation \"),\n                            ($setup.showTyping)\n                              ? ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementBlock)(\"div\", _hoisted_12, _cache[6] || (_cache[6] = [\n                                  (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", { class: \"avatar bot-avatar\" }, [\n                                    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"i\", { class: \"mdi mdi-robot\" })\n                                  ], -1 /* HOISTED */),\n                                  (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", { class: \"bubble-content\" }, [\n                                    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", { class: \"bubble-text bot-text typing\" }, [\n                                      (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", { class: \"dot\" }),\n                                      (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", { class: \"dot\" }),\n                                      (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", { class: \"dot\" })\n                                    ])\n                                  ], -1 /* HOISTED */)\n                                ])))\n                              : (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\"v-if\", true)\n                          ], 512 /* NEED_PATCH */),\n                          (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_13, [\n                            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_input, {\n                              modelValue: $setup.userInput,\n                              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (($setup.userInput) = $event)),\n                              placeholder: \"Type here...\",\n                              class: \"chat-input\",\n                              onKeydown: $setup.onInputKeyDown,\n                              onKeyup: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withKeys)($setup.handleSend, [\"enter\",\"native\"]),\n                              disabled: $setup.messageSending\n                            }, null, 8 /* PROPS */, [\"modelValue\", \"onKeydown\", \"onKeyup\", \"disabled\"]),\n                            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createVNode)(_component_el_button, {\n                              type: \"primary\",\n                              class: \"chat-send-btn\",\n                              onClick: $setup.handleSend,\n                              disabled: $setup.messageSending,\n                              loading: $setup.messageSending\n                            }, {\n                              default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => _cache[7] || (_cache[7] = [\n                                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createTextVNode)(\"Send\")\n                              ])),\n                              _: 1 /* STABLE */,\n                              __: [7]\n                            }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"loading\"])\n                          ])\n                        ])\n                      ]),\n                      _: 1 /* STABLE */\n                    }),\n                    (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\" right: email (only show after 'start') \"),\n                    ($setup.showEmail)\n                      ? ((0,vue__WEBPACK_IMPORTED_MODULE_9__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_9__.createBlock)(_component_el_col, {\n                          key: 0,\n                          span: 12,\n                          class: \"email-area\"\n                        }, {\n                          default: (0,vue__WEBPACK_IMPORTED_MODULE_9__.withCtx)(() => [\n                            (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_14, [\n                              (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_15, [\n                                _cache[11] || (_cache[11] = (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"h3\", null, \"Request for New Printer Purchase\", -1 /* HOISTED */)),\n                                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_16, [\n                                  _cache[8] || (_cache[8] = (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"i\", { class: \"mdi mdi-account\" }, null, -1 /* HOISTED */)),\n                                  _cache[9] || (_cache[9] = (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", null, \"HR department\", -1 /* HOISTED */)),\n                                  _cache[10] || (_cache[10] = (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", { class: \"email-address\" }, \"<hr@company.com>\", -1 /* HOISTED */)),\n                                  (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"span\", _hoisted_17, (0,vue__WEBPACK_IMPORTED_MODULE_9__.toDisplayString)($setup.todayEmailDate), 1 /* TEXT */)\n                                ])\n                              ]),\n                              (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"div\", _hoisted_18, [\n                                (0,vue__WEBPACK_IMPORTED_MODULE_9__.createElementVNode)(\"p\", { innerHTML: $setup.emailLongRequirement }, null, 8 /* PROPS */, _hoisted_19)\n                              ])\n                            ])\n                          ]),\n                          _: 1 /* STABLE */\n                        }))\n                      : (0,vue__WEBPACK_IMPORTED_MODULE_9__.createCommentVNode)(\"v-if\", true)\n                  ]),\n                  _: 1 /* STABLE */\n                })\n              ]),\n              _: 1 /* STABLE */\n            })\n          ]),\n          _: 1 /* STABLE */\n        })\n      ]),\n      _: 1 /* STABLE */\n    })\n  ]))\n}\n\n//# sourceURL=webpack://ruby-openai/./frontend_app/pages/PreTask.vue?./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-auto-import!./node_modules/vue-loader/dist/templateLoader.js??ruleSet%5B1%5D.rules%5B3%5D!./node_modules/vue-loader/dist/index.js??ruleSet%5B1%5D.rules%5B6%5D.use%5B0%5D");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("e2f722ae5dc0dfe7c8ba")
/******/ })();
/******/ 
/******/ }
);